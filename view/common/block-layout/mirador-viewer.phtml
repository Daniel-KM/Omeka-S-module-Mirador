<?php
$resources = [];
foreach ($attachments as $attachment) {
    $item = $attachment->item();
    if ($item) {
        $resources[] = $item;
    }
}
// Display the viewer with the specified resources.
echo $this->miradorViewer($resources);
